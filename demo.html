<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö—É–ª–∏–Ω–∞—Ä–Ω–∞—è –®–∫–æ–ª–∞ | –î–ï–ú–û</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-banner {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .demo-banner h2 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .demo-banner p {
            color: #666;
            margin: 5px 0;
        }

        .demo-banner code {
            background: #f5f5f5;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: monospace;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 20px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .classes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .class-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .class-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .class-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .class-title {
            font-size: 1.5em;
            color: #667eea;
            font-weight: bold;
        }

        .class-price {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .class-info {
            margin: 15px 0;
            color: #555;
        }

        .class-info-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 0.95em;
        }

        .class-info-item span {
            margin-left: 8px;
        }

        .capacity-bar {
            margin: 15px 0;
        }

        .capacity-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
            color: #666;
        }

        .capacity-progress {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        .capacity-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        .capacity-fill.full {
            background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
        }

        .class-description {
            color: #666;
            line-height: 1.6;
            margin: 15px 0;
        }

        .book-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .book-button:hover:not(:disabled) {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .book-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 30px;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: #333;
        }

        .modal-title {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        #card-element {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
        }

        .submit-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-button:hover:not(:disabled) {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .submit-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .error-message {
            color: #f5576c;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .success-message {
            background: #4caf50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-top: 20px;
        }

        .booking-summary {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .booking-summary-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }

        .booking-summary-total {
            border-top: 2px solid #ddd;
            padding-top: 10px;
            margin-top: 10px;
            font-weight: bold;
            font-size: 1.2em;
        }

        .icon {
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .classes-grid {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 2em;
            }

            .modal-content {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="demo-banner">
            <h2>üéØ –î–ï–ú–û –í–ï–†–°–ò–Ø</h2>
            <p>–≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∫—É–ª–∏–Ω–∞—Ä–Ω–æ–π —à–∫–æ–ª—ã</p>
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É Stripe: <code>4242 4242 4242 4242</code> | CVC: –ª—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã | –î–∞—Ç–∞: –ª—é–±–∞—è –±—É–¥—É—â–∞—è</p>
            <p style="margin-top: 10px;">‚ö†Ô∏è –î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å (—Å–º. README.md)</p>
        </div>

        <header>
            <h1>üç≥ –ö—É–ª–∏–Ω–∞—Ä–Ω–∞—è –®–∫–æ–ª–∞</h1>
            <p>–ù–∞—É—á–∏—Ç–µ—Å—å –≥–æ—Ç–æ–≤–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª</p>
        </header>

        <div class="classes-grid" id="classesGrid"></div>
    </div>

    <!-- Booking Modal -->
    <div class="modal" id="bookingModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 class="modal-title">–ó–∞–ø–∏—Å—å –Ω–∞ –∑–∞–Ω—è—Ç–∏–µ</h2>
            
            <div class="booking-summary" id="bookingSummary"></div>

            <form id="bookingForm">
                <div class="form-group">
                    <label for="name">–ò–º—è –∏ –§–∞–º–∏–ª–∏—è *</label>
                    <input type="text" id="name" required placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                </div>

                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" required placeholder="ivan@example.com">
                </div>

                <div class="form-group">
                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" id="phone" required placeholder="+371 12345678">
                </div>

                <div class="form-group">
                    <label for="participants">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ *</label>
                    <select id="participants" required></select>
                </div>

                <div class="form-group">
                    <label>–î–µ–º–æ - –ø–ª–∞—Ç—ë–∂ —ç–º—É–ª–∏—Ä—É–µ—Ç—Å—è</label>
                    <div style="padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; background: #f9f9f9;">
                        <p style="margin: 5px 0; font-size: 0.9em; color: #666;">üí≥ –ö–∞—Ä—Ç–∞: 4242 4242 4242 4242</p>
                        <p style="margin: 5px 0; font-size: 0.9em; color: #666;">üìÖ –î–∞—Ç–∞: 12/34</p>
                        <p style="margin: 5px 0; font-size: 0.9em; color: #666;">üîê CVC: 123</p>
                    </div>
                    <div id="card-errors" class="error-message"></div>
                </div>

                <button type="submit" class="submit-button" id="submitButton">
                    –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å (–î–ï–ú–û)
                </button>

                <div id="successMessage" style="display: none;"></div>
            </form>
        </div>
    </div>

    <script>
        // Demo mode - –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞
        const classes = [
            {
                id: 1,
                title: "–ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –ø–∞—Å—Ç–∞",
                description: "–ù–∞—É—á–∏—Ç–µ—Å—å –≥–æ—Ç–æ–≤–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â—É—é –ø–∞—Å—Ç—É –∫–∞—Ä–±–æ–Ω–∞—Ä–∞ –∏ –∞–ª—å–æ –æ–ª–∏–æ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏—Ö —à–µ—Ñ–æ–≤",
                date: "2025-11-15",
                time: "18:00",
                duration: "3 —á–∞—Å–∞",
                price: 45,
                capacity: 12,
                booked: 8,
                instructor: "–ú–∞—Ä–∫–æ –†–æ—Å—Å–∏"
            },
            {
                id: 2,
                title: "–Ø–ø–æ–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è",
                description: "–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –ø–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é —Å—É—à–∏, —Ä–æ–ª–ª–æ–≤ –∏ –º–∏—Å–æ —Å—É–ø–∞ –æ—Ç —è–ø–æ–Ω—Å–∫–æ–≥–æ —à–µ—Ñ-–ø–æ–≤–∞—Ä–∞",
                date: "2025-11-17",
                time: "16:00",
                duration: "4 —á–∞—Å–∞",
                price: 55,
                capacity: 10,
                booked: 10,
                instructor: "–Æ–∫–∏ –¢–∞–Ω–∞–∫–∞"
            },
            {
                id: 3,
                title: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∞—è –≤—ã–ø–µ—á–∫–∞",
                description: "–ö—Ä—É–∞—Å—Å–∞–Ω—ã, —ç–∫–ª–µ—Ä—ã –∏ –º–∞–∫–∞—Ä–æ–Ω—Å - —Å–µ–∫—Ä–µ—Ç—ã —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–π –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–æ–π —à–∫–æ–ª—ã",
                date: "2025-11-20",
                time: "10:00",
                duration: "5 —á–∞—Å–æ–≤",
                price: 65,
                capacity: 8,
                booked: 3,
                instructor: "–ñ–∞–Ω-–ü—å–µ—Ä –î—é–ø–æ–Ω"
            },
            {
                id: 4,
                title: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫—É—Ö–Ω—è",
                description: "–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω–∞—è –≥–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è –∏ –∞–≤–∞–Ω–≥–∞—Ä–¥–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –±–ª—é–¥",
                date: "2025-11-22",
                time: "19:00",
                duration: "3 —á–∞—Å–∞",
                price: 70,
                capacity: 6,
                booked: 2,
                instructor: "–ê–Ω–Ω–∞ –ù–æ–≤–∏–∫–æ–≤–∞"
            },
            {
                id: 5,
                title: "–ò—Å–ø–∞–Ω—Å–∫–∏–µ —Ç–∞–ø–∞—Å",
                description: "–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö –∏—Å–ø–∞–Ω—Å–∫–∏—Ö –∑–∞–∫—É—Å–æ–∫ –∏ –ø–∞—ç–ª—å–∏",
                date: "2025-11-25",
                time: "17:00",
                duration: "3 —á–∞—Å–∞",
                price: 50,
                capacity: 15,
                booked: 7,
                instructor: "–ö–∞—Ä–ª–æ—Å –ì–∞—Ä—Å–∏—è"
            },
            {
                id: 6,
                title: "–ó–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ",
                description: "–í–∫—É—Å–Ω—ã–µ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –±–ª—é–¥–∞ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Å–ª–µ–¥–∏—Ç –∑–∞ –∑–¥–æ—Ä–æ–≤—å–µ–º",
                date: "2025-11-28",
                time: "11:00",
                duration: "2.5 —á–∞—Å–∞",
                price: 40,
                capacity: 12,
                booked: 5,
                instructor: "–ï–ª–µ–Ω–∞ –°–º–∏—Ä–Ω–æ–≤–∞"
            }
        ];

        let selectedClass = null;

        // Render classes
        function renderClasses() {
            const grid = document.getElementById('classesGrid');
            grid.innerHTML = classes.map(cls => {
                const availableSpots = cls.capacity - cls.booked;
                const isFull = availableSpots <= 0;
                const percentage = (cls.booked / cls.capacity) * 100;

                return `
                    <div class="class-card">
                        <div class="class-header">
                            <div class="class-title">${cls.title}</div>
                            <div class="class-price">‚Ç¨${cls.price}</div>
                        </div>
                        
                        <div class="class-info">
                            <div class="class-info-item">
                                <span class="icon">üìÖ</span>
                                <span>${formatDate(cls.date)}</span>
                            </div>
                            <div class="class-info-item">
                                <span class="icon">üïê</span>
                                <span>${cls.time} (${cls.duration})</span>
                            </div>
                            <div class="class-info-item">
                                <span class="icon">üë®‚Äçüç≥</span>
                                <span>${cls.instructor}</span>
                            </div>
                        </div>

                        <div class="class-description">${cls.description}</div>

                        <div class="capacity-bar">
                            <div class="capacity-label">
                                <span>–°–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç:</span>
                                <span><strong>${availableSpots}</strong> –∏–∑ ${cls.capacity}</span>
                            </div>
                            <div class="capacity-progress">
                                <div class="capacity-fill ${isFull ? 'full' : ''}" 
                                     style="width: ${percentage}%"></div>
                            </div>
                        </div>

                        <button class="book-button" 
                                onclick="openBookingModal(${cls.id})"
                                ${isFull ? 'disabled' : ''}>
                            ${isFull ? '‚ùå –ú–µ—Å—Ç –Ω–µ—Ç' : '‚úÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è'}
                        </button>
                    </div>
                `;
            }).join('');
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return date.toLocaleDateString('ru-RU', options);
        }

        function openBookingModal(classId) {
            selectedClass = classes.find(c => c.id === classId);
            const modal = document.getElementById('bookingModal');
            modal.classList.add('active');

            // Update summary
            updateBookingSummary();

            // Setup participants dropdown
            const participantsSelect = document.getElementById('participants');
            const availableSpots = selectedClass.capacity - selectedClass.booked;
            participantsSelect.innerHTML = '';
            for (let i = 1; i <= Math.min(availableSpots, 5); i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                participantsSelect.appendChild(option);
            }

            // Update summary when participants change
            participantsSelect.addEventListener('change', updateBookingSummary);
        }

        function updateBookingSummary() {
            if (!selectedClass) return;

            const participants = parseInt(document.getElementById('participants').value) || 1;
            const total = selectedClass.price * participants;

            document.getElementById('bookingSummary').innerHTML = `
                <div class="booking-summary-item">
                    <span>–ó–∞–Ω—è—Ç–∏–µ:</span>
                    <span><strong>${selectedClass.title}</strong></span>
                </div>
                <div class="booking-summary-item">
                    <span>–î–∞—Ç–∞:</span>
                    <span>${formatDate(selectedClass.date)} –≤ ${selectedClass.time}</span>
                </div>
                <div class="booking-summary-item">
                    <span>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤:</span>
                    <span>${participants} √ó ‚Ç¨${selectedClass.price}</span>
                </div>
                <div class="booking-summary-item booking-summary-total">
                    <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
                    <span>‚Ç¨${total}</span>
                </div>
            `;
        }

        function closeModal() {
            document.getElementById('bookingModal').classList.remove('active');
            document.getElementById('bookingForm').reset();
            document.getElementById('successMessage').style.display = 'none';
        }

        // Handle form submission (DEMO mode)
        document.getElementById('bookingForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const submitButton = document.getElementById('submitButton');
            submitButton.disabled = true;
            submitButton.textContent = '–û–±—Ä–∞–±–æ—Ç–∫–∞...';

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const participants = parseInt(document.getElementById('participants').value);

            // Simulate processing delay
            await new Promise(resolve => setTimeout(resolve, 1500));

            try {
                // Update class booking count
                selectedClass.booked += participants;
                renderClasses();

                // Show success message
                document.getElementById('successMessage').innerHTML = `
                    <div class="success-message">
                        <h3>‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! (–î–ï–ú–û)</h3>
                        <p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, ${name}!</p>
                        <p>–í—ã –∑–∞–ø–∏—Å–∞–ª–∏—Å—å –Ω–∞ "${selectedClass.title}"</p>
                        <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: ${participants}</p>
                        <p>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ ${email}</p>
                        <p style="margin-top: 15px; font-size: 0.85em; opacity: 0.8;">
                            ‚ÑπÔ∏è –≠—Ç–æ –¥–µ–º–æ-—Ä–µ–∂–∏–º. –î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –∑–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–µ—Ä.
                        </p>
                    </div>
                `;
                document.getElementById('successMessage').style.display = 'block';
                document.getElementById('bookingForm').style.display = 'none';

                // Close modal after 4 seconds
                setTimeout(() => {
                    closeModal();
                    document.getElementById('bookingForm').style.display = 'block';
                }, 4000);

            } catch (error) {
                document.getElementById('card-errors').textContent = error.message;
                submitButton.disabled = false;
                submitButton.textContent = '–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å (–î–ï–ú–û)';
            }
        });

        // Initialize
        renderClasses();
    </script>
</body>
</html>
